<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RSS Folha</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(#0a1a2f,#1f4d8b);
color:white;
text-align:center;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
height:100vh;
}

.rssTitle{
font-size:60px;
margin-bottom:20px;
}

#rssContainer{
width:90%;
height:65%;
display:flex;
align-items:center;
justify-content:center;
}

.rssItem{
font-size:28px;
background:rgba(0,0,0,0.5);
padding:20px;
border-radius:10px;
max-width:900px;
text-align:left;
}

.contador{
text-align:right;
font-size:18px;
color:#ccc;
margin-bottom:10px;
}

#progress{
width:80%;
height:10px;
background:#444;
margin-top:20px;
border-radius:10px;
overflow:hidden;
}

#bar{
height:100%;
width:0%;
background:#00ffcc;
transition:width linear;
}
</style>
</head>

<body>

<div class="rssTitle">FOLHA – EM CIMA DA HORA</div>
<div id="rssContainer">Carregando...</div>

<div id="progress"><div id="bar"></div></div>

<script>
const rssURL="https://feeds.folha.uol.com.br/emcimadahora/rss091.xml";

/* ===== CONFIGURAÇÕES ===== */
const QTDE = 10;          // quantidade notícias
const TEMPO = 10000;      // tempo por notícia
const ATUALIZA = 600000;  // atualizar RSS
/* ========================= */

let noticias=[];
let indice=0;

function formatarData(d){
return new Date(d).toLocaleString("pt-BR",
{timeZone:"America/Sao_Paulo"});
}

async function atualizarRSS(){
try{
let r=await fetch("https://api.rss2json.com/v1/api.json?rss_url="+encodeURIComponent(rssURL));
let d=await r.json();

if(!d.items || d.items.length==0){
document.getElementById("rssContainer").innerHTML="Sem notícias";
return;
}

noticias=d.items.slice(0,QTDE);
indice=0;
mostrar();

}catch(e){
document.getElementById("rssContainer").innerHTML="Erro ao carregar RSS";
}
}

function mostrar(){
if(noticias.length==0) return;

let n=noticias[indice];

let titulo=n.title||"";
let resumo=(n.description||"").replace(/<[^>]*>/g,"");
let data=formatarData(n.pubDate||"");
let fonte=new URL(n.link||"https://folha.uol.com.br").hostname;

let num=String(indice+1).padStart(2,"0");
let tot=String(noticias.length).padStart(2,"0");

document.getElementById("rssContainer").innerHTML=
`<div class="rssItem">
<div class="contador">${num}/${tot}</div>
<b>${titulo}</b><br>
${resumo}<br><br>
${data} — ${fonte}
</div>`;

barra();

indice++;
if(indice>=noticias.length) indice=0;
}

function barra(){
let b=document.getElementById("bar");
b.style.transition="none";
b.style.width="0%";
setTimeout(()=>{
b.style.transition=width ${TEMPO}ms linear;
b.style.width="100%";
},50);
}

setInterval(mostrar,TEMPO);
setInterval(atualizarRSS,ATUALIZA);

atualizarRSS();
</script>

</body>
</html>
