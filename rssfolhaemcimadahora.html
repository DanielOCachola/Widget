<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RSS Folha – Em Cima da Hora</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(#0a1a2f,#1f4d8b);
  color:white;
  text-align:center;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
}

/* ===== FUNDO ===== */
#bgImage{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background-size:cover;
  background-position:center;
  filter:brightness(0.35);
  z-index:-1;
}

.rssTitle{
  font-size:60px;
  margin-bottom:20px;
  font-weight:bold;
}

#rssContainer{
  width:90%;
  height:65%;
  display:flex;
  align-items:center;
  justify-content:center;
}

.rssItem{
  font-size:28px;
  text-align:left;
  background: rgba(0,0,0,0.6);
  padding: 20px;
  border-radius: 10px;
  max-width: 800px;
}

.contador{
  font-size:18px;
  text-align:right;
  margin-bottom:10px;
  color:#ccc;
}

.info{
  font-size:20px;
  color:#aaa;
  margin-top:10px;
}

#progressContainer{
  width:80%;
  height:10px;
  background:rgba(255,255,255,0.2);
  border-radius:10px;
  margin-top:20px;
}

#progressBar{
  height:100%;
  width:0%;
  background:#00ffcc;
}
</style>
</head>

<body>

<div id="bgImage"></div>
<div class="rssTitle">EM CIMA DA HORA - FOLHA</div>
<div id="rssContainer">Carregando notícias...</div>

<div id="progressContainer">
<div id="progressBar"></div>
</div>

<script>

const rssURL="https://feeds.folha.uol.com.br/emcimadahora/rss091.xml";

/* CONFIGURAÇÕES */
const QUANTIDADE=10;
const TEMPO=12000;
/* ------------ */

let noticias=[];
let i=0;

function limpar(txt){
  return txt.replace(/<[^>]*>/g,"");
}

function fonte(link){
  try{return new URL(link).hostname;}
  catch{return "";}
}

async function carregar(){

try{

const r=await fetch(
https://api.rss2json.app/v1/api.json?rss_url=${encodeURIComponent(rssURL)}
);

const d=await r.json();

noticias=d.items.slice(0,QUANTIDADE);

mostrar();

}catch{
document.getElementById("rssContainer").innerHTML="Erro ao carregar RSS";
}

}

function mostrar(){

if(noticias.length==0)return;

const n=noticias[i];

const num=String(i+1).padStart(2,"0");
const tot=String(noticias.length).padStart(2,"0");

document.getElementById("rssContainer").innerHTML=
`
<div class="rssItem">
<div class="contador">${num}/${tot}</div>
<b>${n.title}</b>
<div>${limpar(n.description||"")}</div>
<div class="info">${fonte(n.link)}</div>
</div>
`;

if(n.thumbnail){
document.getElementById("bgImage").style.backgroundImage=
url('${n.thumbnail}');
}

barra();

i++;
if(i>=noticias.length)i=0;

}

function barra(){
const b=document.getElementById("progressBar");
b.style.transition="none";
b.style.width="0%";
setTimeout(()=>{
b.style.transition=width ${TEMPO}ms linear;
b.style.width="100%";
},50);
}

setInterval(mostrar,TEMPO);
setInterval(carregar,600000);

carregar();

</script>

</body>
</html>
