<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RSS Folha – Em Cima da Hora</title>
<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(#0a1a2f,#1f4d8b);
  color:white;
  text-align:center;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

.rssTitle{
  font-size:60px;
  margin-bottom:20px;
  font-weight:bold;
}

#rssContainer{
  width:90%;
  height:70%;
  overflow:hidden;
  position:relative;
}

#rss{
  position:absolute;
  width:100%;
}

.rssItem{
  font-size:28px;
  margin:20px auto;
  text-align:left;
  background: rgba(0,0,0,0.5); /* fundo semi-transparente */
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.5); /* sombra leve */
  max-width: 800px;
}

.rssItem b{
  display:block;
  font-size:32px;
  margin-bottom:5px;
  color:white; /* título branco */
}

.rssItem span{
  font-size:24px;
  color:#ddd;
}

.rssItem span a{
  color:#ddd;        /* link no resumo branco */
  text-decoration:none;
  pointer-events:none; /* desativa clique */
}

.rssItem .info{
  font-size:20px;
  color:#aaa;
  margin-top:5px;
}
</style>
</head>

<body>

<div class="rssTitle">FOLHA – EM CIMA DA HORA</div>
<div id="rssContainer"><div id="rss">Carregando notícias...</div></div>

<script>
const rssURL = "https://feeds.folha.uol.com.br/emcimadahora/rss091.xml";

// Formata a data no fuso de Brasília
function formatarData(dateStr){
  const d = new Date(dateStr);
  return d.toLocaleString("pt-BR", {timeZone:"America/Sao_Paulo", day:"2-digit", month:"2-digit", year:"numeric", hour:"2-digit", minute:"2-digit"});
}

// Extrai domínio do link como fonte
function extrairFonte(url){
  try{
    return new URL(url).hostname.replace('www.','');
  }catch{
    return "Fonte desconhecida";
  }
}

// Remove tags de link do resumo e "Leia mais"
function limparResumo(text){
  let t = text.replace(/<a[^>]*>.*?<\/a>/gi,''); // remove tags <a>
  t = t.replace(/Leia mais/gi,''); // remove "Leia mais"
  return t;
}

async function atualizarRSS(){
  try{
    const r = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssURL)}`);
    const d = await r.json();

    let html = "";
    d.items.slice(0,10).forEach(n=>{
      let data = formatarData(n.pubDate);
      let fonte = extrairFonte(n.link);
      let resumo = limparResumo(n.description || "");

      html += `<div class="rssItem">
        <b>${n.title}</b>
        <span>${resumo}</span>
        <div class="info">${data} — ${fonte}</div>
      </div>`;
    });

    document.getElementById("rss").innerHTML = html;
    startScroll();

  }catch{
    document.getElementById("rss").innerHTML = "Erro ao carregar notícias";
  }
}

let scrollPos = 0, scrollInterval;
function startScroll(){
  const rss = document.getElementById("rss");
  const container = document.getElementById("rssContainer");
  clearInterval(scrollInterval);

  scrollPos = container.offsetHeight;
  rss.style.top = scrollPos + "px";

  scrollInterval = setInterval(()=>{
    scrollPos -= 1;
    rss.style.top = scrollPos + "px";
    if(scrollPos + rss.offsetHeight < 0){
      scrollPos = container.offsetHeight;
    }
  },50);
}

// Carrega e atualiza
atualizarRSS();
setInterval(atualizarRSS,600000); // atualiza a cada 10 min
</script>

</body>
</html>
