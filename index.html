<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Clima + RSS</title>

<style>
body{
margin:0;
background:linear-gradient(#0a1a2f,#1f4d8b);
color:white;
font-family:Arial, Helvetica, sans-serif;
text-align:center;
height:100vh;
overflow:hidden;
}

/* ===== TELAS ===== */
.screen{
position:absolute;
width:100%;
height:100%;
display:none;
flex-direction:column;
justify-content:center;
align-items:center;
}

.active{
display:flex;
}

/* ===== SEU LAYOUT ORIGINAL ===== */
.city{font-size:60px;font-weight:bold;margin-bottom:20px;}
.date{font-size:40px;margin-bottom:20px;}
.clock{font-size:120px;font-weight:bold;margin-bottom:30px;}

.weather{
font-size:50px;
display:flex;
align-items:center;
justify-content:center;
gap:20px;
width:100%;
}

.weather div{
display:flex;
flex-direction:column;
align-items:center;
}

.weather img{width:120px;}

.forecast{
margin-top:30px;
font-size:28px;
display:flex;
gap:40px;
justify-content:center;
align-items:center;
width:100%;
}

.forecast div{
display:flex;
flex-direction:column;
align-items:center;
}

.forecast img{width:100px;}

/* ===== RSS ===== */
.rssTitle{
font-size:60px;
margin-bottom:40px;
}

.rssItem{
font-size:30px;
margin:10px;
max-width:80%;
}
</style>
</head>

<body>

<!-- ===== TELA CLIMA ===== -->
<div id="screenClima" class="screen active">

<div class="city">VARGEM GRANDE DO SUL - SP</div>
<div id="date" class="date">--</div>
<div id="clock" class="clock">--:--:--</div>
<div id="weather" class="weather">Carregando clima...</div>
<div id="forecast" class="forecast"></div>

</div>

<!-- ===== TELA RSS ===== -->
<div id="screenRSS" class="screen">
<div class="rssTitle">NOTÍCIAS</div>
<div id="rss"></div>
</div>

<script>
const apiKey = "b6da075db2b8724811579c96f5239b4d";

/* ===== HORA ===== */
function atualizarHora(){
let agora = new Date();

clock.innerHTML = agora.toLocaleTimeString("pt-BR");

date.innerHTML =
agora.toLocaleDateString("pt-BR",
{weekday:"long", day:"numeric", month:"long", year:"numeric"}
).toUpperCase();
}

setInterval(atualizarHora,1000);
atualizarHora();

/* ===== CLIMA (SEU CODIGO ORIGINAL) ===== */
async function atualizarClima(){
try{
let url =
"https://api.openweathermap.org/data/2.5/weather?q=Vargem%20Grande%20do%20Sul,BR&units=metric&lang=pt_br&appid="+apiKey;

let r = await fetch(url);
let d = await r.json();

let icone = d.weather[0].icon;
let desc = d.weather[0].description;
let temp = Math.round(d.main.temp);
let sensacao = Math.round(d.main.feels_like);

weather.innerHTML =
`<img src="https://openweathermap.org/img/wn/${icone}@4x.png" onerror="this.style.display='none'">
<div>
${temp}°C - ${desc}<br>
Sensação térmica: ${sensacao}°C
</div>`;
}catch{
weather.innerHTML="Erro ao carregar clima";
}
}

async function atualizarPrevisao(){
try{
let url =
"https://api.openweathermap.org/data/2.5/forecast?q=Vargem%20Grande%20do%20Sul,BR&units=metric&lang=pt_br&appid="+apiKey;

let r = await fetch(url);
let d = await r.json();

let diasMostrados={},html="";

for(let item of d.list){
if(item.dt_txt.includes("12:00:00")){
let data=item.dt_txt.split(" ")[0];

if(!diasMostrados[data] && Object.keys(diasMostrados).length<3){
diasMostrados[data]=true;

html+=`
<div>
<b>${new Date(data).toLocaleDateString("pt-BR",{weekday:"short"})}</b>
<img src="https://openweathermap.org/img/wn/${item.weather[0].icon}@4x.png">
${Math.round(item.main.temp)}°C
</div>`;
}
}
}
forecast.innerHTML=html;
}catch{}
}

atualizarClima();
atualizarPrevisao();
setInterval(atualizarClima,600000);
setInterval(atualizarPrevisao,600000);

/* ===== RSS ===== */
const rssURL =
"https://api.rss2json.com/v1/api.json?rss_url=https://g1.globo.com/rss/g1/";

async function atualizarRSS(){
try{
let r = await fetch(rssURL);
let d = await r.json();

let html="";
d.items.slice(0,5).forEach(n=>{
html += `<div class="rssItem">• ${n.title}</div>`;
});

rss.innerHTML = html;
}catch{
rss.innerHTML="Erro ao carregar notícias";
}
}

atualizarRSS();
setInterval(atualizarRSS,600000);

/* ===== TROCAR TELAS ===== */
let tela=0;

setInterval(()=>{
tela++;

document.querySelectorAll(".screen")
.forEach(s=>s.classList.remove("active"));

if(tela%2==0)
screenClima.classList.add("active");
else
screenRSS.classList.add("active");

},30000); // 30 segundos
</script>

</body>
</html>
