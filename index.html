<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>ILETROCAR Clima</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b1c2e;
  color:white;
  text-align:center;
}

.topo{
  background:#12395c;
  padding:20px;
  font-size:40px;
  display:flex;
  justify-content:space-between;
}

.hora{
  font-size:140px;
  margin-top:40px;
}

.clima{
  font-size:60px;
  margin-top:20px;
}
</style>
</head>

<body>

<div class="topo">
  <b>ILETROCAR</b>
  <span>Vargem Grande do Sul - SP</span>
</div>

<div id="hora" class="hora">--:--</div>
<div id="clima" class="clima">Carregando clima...</div>

<script>

const API_KEY = "b6da075db2b8724811579c96f5239b4d";

function atualizarHora(){
  let agora = new Date();
  let hora = agora.toLocaleTimeString("pt-BR", {hour:"2-digit", minute:"2-digit"});
  document.getElementById("hora").innerText = hora;
}
setInterval(atualizarHora,1000);
atualizarHora();

async function clima(){
  try{
    let url = "https://api.openweathermap.org/data/2.5/weather?q=Vargem Grande do Sul,BR&appid=" 
              + API_KEY + "&units=metric&lang=pt_br";

    let r = await fetch(url);
    let d = await r.json();

    document.getElementById("clima").innerText =
      Math.round(d.main.temp) + "Â°C - " + d.weather[0].description;

  }catch(e){
    document.getElementById("clima").innerText = "Erro no clima";
  }
}
clima();
setInterval(clima,600000);

</script>

</body>
</html>
