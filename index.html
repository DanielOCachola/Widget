<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(#1f2a44,#0d1b2a);
  color:white;
  text-align:center;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.city{
  font-size:60px;
  letter-spacing:6px;
  font-weight:700;
  margin-bottom:10px;
}

.date{
  font-size:30px;
  font-weight:400;
  margin-bottom:20px;
  opacity:0.9;
}

.clock{
  font-size:150px;
  font-weight:bold;
  margin-bottom:30px;
}

.weather{
  font-size:40px;
  display:flex;
  align-items:center;
  gap:15px;
}
.weather img{
  width:70px;
}
</style>
</head>

<body>

<div class="city">VARGEM GRANDE DO SUL - SP</div>
<div id="date" class="date"></div>
<div id="clock" class="clock"></div>

<div class="weather">
  <img id="icon">
  <div id="weatherText">Carregando clima...</div>
</div>

<script>

/* ========= RELÓGIO (INDEPENDENTE) ========= */
function atualizarRelogio(){
  const agora = new Date();

  document.getElementById("clock").innerText =
    agora.toLocaleTimeString("pt-BR");

  document.getElementById("date").innerText =
    agora.toLocaleDateString("pt-BR",{
      weekday:"long",
      day:"2-digit",
      month:"long",
      year:"numeric"
    }).toUpperCase();
}

setInterval(atualizarRelogio,1000);
atualizarRelogio();


/* ========= CLIMA COM PROTEÇÃO DE ERRO ========= */

async function carregarClima(){
  try{

    const apiKey = "b6da075db2b8724811579c96f5239b4d;  // <-- COLOQUE SUA CHAVE
    const cidade = "Vargem Grande do Sul";

    const resposta = await fetch(
      https://api.openweathermap.org/data/2.5/weather?q=${cidade},BR&units=metric&lang=pt_br&appid=${apiKey}
    );

    if(!resposta.ok){
      throw new Error("Erro na API");
    }

    const dados = await resposta.json();

    const temp = Math.round(dados.main.temp);
    const desc = dados.weather[0].description.toUpperCase();
    const icone = dados.weather[0].icon;

    document.getElementById("weatherText").innerText =
      ${temp}°C   ${desc};

    document.getElementById("icon").src =
      https://openweathermap.org/img/wn/${icone}@2x.png;

  }catch(erro){
    document.getElementById("weatherText").innerText =
      "Clima indisponível";
  }
}

carregarClima();
setInterval(carregarClima,300000);

</script>

</body>
</html>
