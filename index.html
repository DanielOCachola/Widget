<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Painel</title>

<style>
body{
  margin:0;
  background:#0b1c2e;
  font-family:Arial Black;
  color:white;
  text-align:center;
}

.cidade{font-size:70px;margin-top:20px;}
.data{font-size:55px;margin-top:10px;}
.hora{font-size:180px;margin-top:10px;}
.clima{font-size:60px;margin-top:30px;}
</style>
</head>

<body>

<div class="cidade">VARGEM GRANDE DO SUL - SP</div>
<div id="data" class="data"></div>
<div id="hora" class="hora"></div>
<div id="clima" class="clima">Carregando clima...</div>

<script>

// ===== HORA =====
function atualizar(){
  let agora = new Date();

  document.getElementById("hora").innerHTML =
    agora.toLocaleTimeString("pt-BR");

  document.getElementById("data").innerHTML =
    agora.toLocaleDateString("pt-BR",{
      weekday:"long",
      day:"2-digit",
      month:"long",
      year:"numeric"
    }).toUpperCase();
}
setInterval(atualizar,1000);
atualizar();


// ===== CLIMA =====
async function clima(){
  try{
    let resp = await fetch(
      "https://api.openweathermap.org/data/2.5/weather?q=Vargem Grande do Sul,BR&units=metric&lang=pt_br&appid=b6da075db2b8724811579c96f5239b4d"
    );

    let d = await resp.json();

    if(d.cod!=200){
      document.getElementById("clima").innerHTML="Erro API clima";
      return;
    }

    let temp = Math.round(d.main.temp);
    let desc = d.weather[0].description;
    let icon = d.weather[0].icon;

    document.getElementById("clima").innerHTML =
      `<img src="https://openweathermap.org/img/wn/${icon}@2x.png">
       ${temp}Â°C - ${desc}`;

  }catch(e){
    document.getElementById("clima").innerHTML="Sem internet para clima";
  }
}

clima();
setInterval(clima,300000);

</script>

</body>
</html>
